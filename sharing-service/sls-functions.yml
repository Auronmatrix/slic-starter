create:
  handler: services/sharing/create.main
  environment:
    SLIC_NS_DOMAIN: ${self:custom.nsDomain}
    SLIC_STAGE: ${self:custom.stage}
    EMAIL_QUEUE_NAME: ${self:custom.emailQueueName}
  events:
    - http:
        path: /{listId}
        method: post
        cors: true
        authorizer:
          type: COGNITO_USER_POOLS
          authorizerId:
            Ref: cognitoAuthorizer

confirm:
  handler: services/sharing/confirm.main
  environment:
    SLIC_NS_DOMAIN: ${self:custom.nsDomain}
    SLIC_STAGE: ${self:custom.stage}
    EMAIL_QUEUE_NAME: ${self:custom.emailQueueName}
  events:
    - http:
        path: /confirm/{code}
        method: post
        cors: true
        authorizer:
          type: COGNITO_USER_POOLS
          authorizerId:
            Ref: cognitoAuthorizer
